var oCtrl_PersonalDetail;var oFragments={};sap.ui.define(["jquery.sap.global","sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,n,a){var l;return t.extend("com.exonmarcelo.geser.webapp.controller.VehicleDetail",{_oPersonalCloned:{},_sActionRol:"",onInit:function(t){oCtrl_PersonalDetail=this;console.log("init");l=oCtrl_PersonalDetail.getView();l.addEventDelegate({onBeforeShow:e.proxy(function(e){this.onBeforeShow(e)},this)})},onBeforeShow:function(e){oComponent.fnToggleButtonsTP(true);oComponent.fnToggleButtonUser(true);oComponent.fnChangeTitleApp("ToolPage.Header.ToolHeader.Title.12");oCtrl_PersonalDetail.fnToggleButtons(true);oCtrl_PersonalDetail.fnToggleFormInfoPersonal(true);oCtrl_PersonalDetail.fnShowContentInSectionAccess()},onAfterRendering:function(){},fnShowContentInSectionAccess:function(){sUser=oCore.getModel("mPersonalDetail").getData().user;if(sUser==undefined||sUser==""){oCtrl_PersonalDetail.fnToggleContentInSectionAccess(true)}else{oCtrl_PersonalDetail.fnToggleContentInSectionAccess(false)}},fnShowFormInfoPersonal:function(){oCtrl_PersonalDetail.fnToggleContentInSectionAccess(false);oCtrl_PersonalDetail.fnToggleFormInfoPersonal(true)},fnToggleContentInSectionAccess:function(e){oCtrl_PersonalDetail.byId("idVBoxWarningUser").setVisible(e);oCtrl_PersonalDetail.byId("idFormDisplayEditUser").setVisible(!e)},fnToggleButtons:function(e){oCtrl_PersonalDetail.byId("edit").setVisible(e);oCtrl_PersonalDetail.byId("save").setVisible(!e);oCtrl_PersonalDetail.byId("delete").setVisible(e);oCtrl_PersonalDetail.byId("cancel").setVisible(!e);oCtrl_PersonalDetail.fnToggleFormInfoPersonal(e)},fnToggleFormInfoPersonal:function(e){oCtrl_PersonalDetail.byId("idEmployeeFormDisplay").setVisible(e);oCtrl_PersonalDetail.byId("idEmployeeFormEdit").setVisible(!e)},fnToggleFormUser:function(e){oCtrl_PersonalDetail.byId("idUserFormDisplay").setVisible(e);oCtrl_PersonalDetail.byId("idUserFormEdit").setVisible(!e)},onPressEdit:function(t){var o=oCore.getModel("mPersonalDetail").getData();oCtrl_PersonalDetail._oPersonalCloned=e.extend(true,{},o);oCtrl_PersonalDetail.fnToggleButtons(false)},onPressSave:function(e){var t={sIcon:"SUCCESS",sMessage:"Cliente modificado con éxito",fnButtonOK:function(){oCtrl_PersonalDetail.fnToggleButtons(true);console.log("refresh data")}};Utils.fnShowMessage(t)},onPressDelete:function(){var e={sMessage:"¿Desea eliminar este registro?",fnButtonOK:function(){console.log("removed record")},fnButtonNOT:function(){console.log("canceled action")}};Utils.fnShowConfirmationMessage(e)},onPressCancel:function(e){oCore.getModel("mPersonalDetail").setData(oCtrl_PersonalDetail._oPersonalCloned);oCore.getModel("mPersonalDetail").refresh();oCtrl_PersonalDetail.fnToggleButtons(true)},onNewControlSheet:function(e){Utils.fnNewControlSheet(true)},onItemPressControlSheets:function(e){var t=sap.ui.core.UIComponent.getRouterFor(oCtrl_PersonalDetail);t._oConfig.transition="slide";t.navTo("ControlSheetDetail",{},false)},onAddUser:function(e){var t=sap.ui.Device.system.desktop?"sapUiSizeCompact":"sapUiSmallMarginBottom";var o={title:Utils.fnReadTranslate("PersonalDetail.ObjectPageLayout.Sections.ObjectPageSection.Access.Button.1.Text"),icon:"sap-icon://account",content:[new sap.m.Label({text:Utils.fnReadTranslate("PersonalDetail.ObjectPageLayout.Sections.ObjectPageSection.Access.FormElement.1.Label")}),new sap.m.Input({value:"{mPersonalDetail>/user}"}).addStyleClass(t),new sap.m.Label({text:Utils.fnReadTranslate("PersonalDetail.ObjectPageLayout.Sections.ObjectPageSection.Access.FormElement.2.Label")}),new sap.m.Input({value:"{mPersonalDetail>/password}",type:"Password"}).addStyleClass(t),new sap.m.Label({text:Utils.fnReadTranslate("PersonalDetail.ObjectPageLayout.Sections.ObjectPageSection.Access.FormElement.3.Label")}),new sap.m.Input({value:"{mPersonalDetail>/confirm_password}",type:"Password"}).addStyleClass(t)],textButtonOK:Utils.fnReadTranslate("Button.Save"),fnButtonOK:function(){var e={sIcon:"SUCCESS",sMessage:"Usuario agregado con éxito.",fnButtonOK:function(){oCtrl_PersonalDetail.fnShowFormInfoPersonal();oCtrl_PersonalDetail.fnToggleFormUser(true)}};Utils.fnShowMessage(e)},textButtonCancel:Utils.fnReadTranslate("Button.Cancel"),fnButtonCancel:undefined,sClassDialog:t};Utils.fnDialogWithSimpleForm(o)},onChangeUser:function(){oCtrl_PersonalDetail.fnToggleFormUser(false)},onSaveUser:function(){var e={sIcon:"SUCCESS",sMessage:"Usuario modificado con éxito.",fnButtonOK:function(){oCtrl_PersonalDetail.fnToggleFormUser(true)}};Utils.fnShowMessage(e)},onCancelChangeUser:function(){oCtrl_PersonalDetail.fnToggleFormUser(true)},onAddRole:function(e){var t=sap.ui.Device.system.desktop?"sapUiSizeCompact":"sapUiSmallMarginBottom";var o={title:Utils.fnReadTranslate("PersonalDetail.DialogAddRole.Title"),icon:"sap-icon://role",content:[new sap.m.Label({text:Utils.fnReadTranslate("PersonalDetail.DialogAddRole.Label.1.Text")}),new sap.m.Input({value:"{mPersonalDetail>/rolePersonal/role_description}",showValueHelp:true,valueHelpOnly:true,valueHelpRequest:oCtrl_PersonalDetail.onSelectRole}).addStyleClass(t)],textButtonOK:Utils.fnReadTranslate("Button.Save"),fnButtonOK:function(){var e={sIcon:"SUCCESS",sMessage:"Rol agregado con éxito.",fnButtonOK:function(){}};Utils.fnShowMessage(e)},textButtonCancel:Utils.fnReadTranslate("Button.Cancel"),fnButtonCancel:undefined,sClassDialog:t};Utils.fnDialogWithSimpleForm(o)},onSelectRole:function(e){var t=oCore.getModel("mCatalogs");var o=e.getSource();var a=new sap.m.StandardListItem({title:"{mCatalogs>description}"});var l=new sap.m.SelectDialog({noDataText:"{i18n>SelectDialog.noDataText}",title:"{i18n>PersonalDetail.SelectDialog.Roles.Title}",confirm:function(e){var t=e.getParameter("selectedItem");if(t){var n=e.getParameter("selectedItem").getBindingContext("mCatalogs").getPath();var a=oCore.getModel("mCatalogs").getProperty(n);var l=oCore.getModel("mPersonalDetail");var s=l.getData();s.rolePersonal={};s.rolePersonal.role_description=a.description;l.refresh()}if(!t){o.resetProperty("")}},search:function(e){var t=e.getParameter("value");var o=new n("descripction",sap.ui.model.FilterOperator.Contains,t);var a=new sap.ui.model.Filter([o]);var l=e.getSource().getBinding("items");l.filter(a,false)}});l.setModel(t,"mCatalogs");l.bindAggregation("items","mCatalogs>/ROLES",a);l.open()},onPressEditRole:function(e){var t=e.getSource().getBindingInfo("text").binding.getContext().getPath();var o=oCore.getModel("mCatalogs").getProperty(t);var n=oCore.getModel("mPersonalDetail");var a=n.getData();a.rolePersonal={};a.rolePersonal.role_description=o.description;n.refresh();var l=sap.ui.Device.system.desktop?"sapUiSizeCompact":"sapUiSmallMarginBottom";var s={title:Utils.fnReadTranslate("PersonalDetail.DialogEditRole.Title"),icon:"sap-icon://role",content:[new sap.m.Label({text:Utils.fnReadTranslate("PersonalDetail.DialogEditRole.Label.1.Text")}),new sap.m.Input({value:"{mPersonalDetail>/rolePersonal/role_description}",showValueHelp:true,valueHelpOnly:true,valueHelpRequest:oCtrl_PersonalDetail.onSelectRole}).addStyleClass(l)],textButtonOK:Utils.fnReadTranslate("Button.Save"),fnButtonOK:function(){var e={sIcon:"SUCCESS",sMessage:"Rol modificado con éxito.",fnButtonOK:function(){}};Utils.fnShowMessage(e)},textButtonCancel:Utils.fnReadTranslate("Button.Cancel"),fnButtonCancel:undefined,sClassDialog:l};Utils.fnDialogWithSimpleForm(s)}})});